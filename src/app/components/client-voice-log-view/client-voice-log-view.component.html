<p class="mt-3 d-flex justify-content-end align-items-center" style="margin-bottom: 0;">
    <span class="row">
        <div class="col-sm-4">
            <input type="date" class="form-control" name="date" placeholder="Date" [(ngModel)]="searchDateMSISDN">
        </div>
        <div class="col-sm-4">
            <input class="form-control mr-sm-2" type="search" placeholder="MSISDN" aria-label="Search"
                [(ngModel)]="MSISDN">
        </div>
        <div class="col-sm-4">
            <button type="button" class="btn" style="background-color: #111111; color: white;" (click)="searchMSISDN()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path fill="none" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                        d="M2 10h5m-5 7h5M2 3h17m.6 15.6L22 21m-1.2-6.6a5.4 5.4 0 1 0-10.8 0a5.4 5.4 0 0 0 10.8 0"
                        color="white" />
                </svg> Search
            </button>
        </div>
    </span>
</p>

<div class="card shadow mt-3">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold" style="color: #36454F;">Call Record List</h6>
    </div>

    <div class="mt-4 ms-3 d-flex justify-content-between align-items-center">
        <div class="col-sm-4 mb-3 mb-sm-0 d-flex align-items-center">
          <div class="col-sm-4">
            <input type="date" class="form-control" name="date" placeholder="Date" [(ngModel)]="selectedDate" required>
          </div>
          <div class="ms-2 col-sm-4">
            <select class="form-select" aria-label="Default select example" [(ngModel)]="selectedCampaignName">
                <option [value]="''">Select Campaign</option>
              <option *ngFor="let name of campaignNames" [value]="name">{{ name }}</option>
            </select>
          </div>
        </div>
        <span class="me-3">
          <button type="button" class="btn" style="background-color: #36454F; color: white;" (click)="applyFilter()">
            <i class="fa-solid fa-filter"></i> Filter
          </button>
          <button type="button" class="btn ms-2" style="background-color: #36454F; color: white;" (click)="refresh()">
            <i class="fa-solid fa-arrow-rotate-right"></i> Refresh
          </button>
        </span>
      </div>

    <div class="card-body">
        <div class="table-responsive">
            <div id="dataTable_wrapper" class="dataTables_wrapper dt-bootstrap4">
                <table class="table table-hover table-bordered">
                    <thead>
                        <tr>
                            <th>Sl</th>
                            <th>Date Time</th>
                            <th>Phone Number</th>
                            <th>Campaign Name</th>
                            <th>Agent ID</th>
                            <th>Call Records</th>
                            <th>Duration</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let file of mp3Files">
                            <td>{{ file.sl }}</td>
                            <td>{{ file.dateTime }}</td>
                            <td>{{ file.phoneNumber }}</td>
                            <td>{{ file.campaignName }}</td>
                            <td>{{ file.agentId }}</td>
                            <td>

                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    class="me-2 element-class" (click)="playFile(file.fileName)">
                                    <path fill="black"
                                        d="M9.608 1.517c.77-.175 1.57-.267 2.392-.267c5.937 0 10.75 4.813 10.75 10.75S17.937 22.75 12 22.75c-.822 0-1.622-.092-2.392-.267a.75.75 0 1 1 .332-1.463a9.25 9.25 0 1 0 0-18.04a.75.75 0 1 1-.332-1.463M7.314 3.132a.75.75 0 0 1-.235 1.034A9.3 9.3 0 0 0 4.166 7.08a.75.75 0 0 1-1.27-.8A10.8 10.8 0 0 1 6.28 2.897a.75.75 0 0 1 1.035.235M2.98 9.94a.75.75 0 1 0-1.463-.332c-.175.77-.267 1.57-.267 2.392s.092 1.622.267 2.393a.75.75 0 0 0 1.463-.333A9.3 9.3 0 0 1 2.75 12c0-.709.08-1.398.23-2.06m.152 6.746a.75.75 0 0 1 1.034.235a9.3 9.3 0 0 0 2.913 2.913a.75.75 0 0 1-.8 1.27a10.8 10.8 0 0 1-3.382-3.383a.75.75 0 0 1 .235-1.035" />
                                    <path fill="black"
                                        d="M15.414 10.941c.781.462.781 1.656 0 2.118l-4.72 2.787C9.934 16.294 9 15.71 9 14.786V9.214c0-.924.934-1.507 1.694-1.059z" />
                                </svg>
                                |
                                <svg class="ms-2 element-class" xmlns="http://www.w3.org/2000/svg" width="24"
                                    height="24" viewBox="0 0 24 24" (click)="downloadFile(file.fileName)">
                                    <path fill="black" fill-rule="evenodd"
                                        d="M12 15.25a.75.75 0 0 1 .75.75v4.19l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 1 1 1.06-1.06l.72.72V16a.75.75 0 0 1 .75-.75"
                                        clip-rule="evenodd" />
                                    <path fill="black"
                                        d="M12.226 3.5c-2.75 0-4.964 2.2-4.964 4.897c0 .462.065.909.185 1.331c.497.144.963.36 1.383.64a.75.75 0 1 1-.827 1.25a3.54 3.54 0 0 0-1.967-.589c-1.961 0-3.536 1.57-3.536 3.486S4.075 18 6.036 18a.75.75 0 0 1 0 1.5C3.263 19.5 1 17.276 1 14.515c0-2.705 2.17-4.893 4.864-4.983a6.4 6.4 0 0 1-.102-1.135C5.762 4.856 8.664 2 12.226 2c3.158 0 5.796 2.244 6.355 5.221c2.3.977 3.919 3.238 3.919 5.882c0 3.074-2.188 5.631-5.093 6.253a.75.75 0 0 1-.314-1.467c2.24-.48 3.907-2.446 3.907-4.786c0-2.137-1.39-3.962-3.338-4.628a5 5 0 0 0-1.626-.27c-.583 0-1.14.1-1.658.28a.75.75 0 0 1-.494-1.416a6.5 6.5 0 0 1 3.024-.305A4.96 4.96 0 0 0 12.226 3.5" />
                                </svg>
                            </td>
                            <td>{{ file.formattedDuration }}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="pagination">
                    <button (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 0">Previous</button>
                    <span>Page {{ currentPage + 1 }} of {{ totalPages }}</span>
                    <button (click)="onPageChange(currentPage + 1)"
                        [disabled]="currentPage >= totalPages - 1">Next</button>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Audio</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <audio controls id="audioElement" style="width:100%">
                    <source [src]="audioSource" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>

                <!-- <div class="card-footer py-3 border-0" style="background-color: #f8f9fa;">
                    <div class="d-flex flex-start w-100">
                        <div data-mdb-input-init class="form-outline w-100">
                            <textarea class="form-control" id="textAreaExample" rows="4"
                            style="background: #fff;" placeholder="Comments if any..."
                            [(ngModel)]="comment"></textarea>
                        
                        </div>
                    </div>
                    <div class="float-end mt-2 pt-1">
                        <button type="button" class="btn btn-sm me-2" style="background-color: #111111; color: white;" (click)="postComment()">Post comment</button>
                    </div>
                </div> -->
            </div>
        </div>
    </div>
</div>



<!-- <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Audio</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <audio controls id="audioElement" style="width:100%">
                    <source [src]="audioSource" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>

                <div class="card-footer py-3 border-0" style="background-color: #f8f9fa;">
                    <div class="d-flex flex-start w-100">
                   
                      <div data-mdb-input-init class="form-outline w-100">
                        <textarea class="form-control" id="textAreaExample" rows="4"
                          style="background: #fff;" placeholder="Comments if any..."></textarea>
                      </div>
                    </div>
                    <div class="float-end mt-2 pt-1">
                      <button  type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-sm me-2">Post comment</button>
                    </div>
                  </div>

            </div>
        </div>
    </div>
</div> -->
